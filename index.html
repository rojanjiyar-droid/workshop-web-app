<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÙ… Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ Ú©Ø§Ø±Ø®Ø§Ù†Ù‡ ÛŒÙˆÙ†ÙˆÙ„ÛŒØª - Ú©Ø§Ù…Ù„ Ø¨Ø§ ØªÙ…Ø§Ù… ØªØ¨â€ŒÙ‡Ø§</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tahoma', Arial, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .login-page {
            padding: 40px;
            text-align: center;
        }
        
        .logo {
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
            background: #2c3e50;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
        }
        
        .login-form {
            max-width: 400px;
            margin: 0 auto;
        }
        
        .input-group {
            margin-bottom: 20px;
            text-align: right;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus {
            border-color: #3498db;
            outline: none;
        }
        
        .btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .btn-sm {
            padding: 8px 15px;
            font-size: 12px;
        }
        
        .btn-success { background: #27ae60; }
        .btn-primary { background: #3498db; }
        .btn-warning { background: #f39c12; }
        .btn-danger { background: #e74c3c; }
        .btn-info { background: #17a2b8; }
        
        .main-page {
            display: none;
        }
        
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav {
            background: #34495e;
            display: flex;
            overflow-x: auto;
        }
        
        .nav-btn {
            padding: 15px 20px;
            border: none;
            background: none;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            border-bottom: 3px solid transparent;
        }
        
        .nav-btn:hover {
            background: #3c5570;
        }
        
        .nav-btn.active {
            background: #2980b9;
            border-bottom-color: #e74c3c;
        }
        
        .content {
            padding: 20px;
            min-height: 500px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        
        .form-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-right: 4px solid #3498db;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .form-group {
            text-align: right;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #2c3e50;
            font-weight: bold;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .product-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr auto;
            gap: 10px;
            align-items: end;
            margin-bottom: 10px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        .check-row {
            background: #f0f8ff;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            border: 1px solid #b0d4f5;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .check-row div {
            flex-grow: 1;
        }

        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 400px;
        }

        .notification {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border-right: 4px solid #27ae60;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideIn 0.3s ease-out;
        }

        .notification.error {
            border-right-color: #e74c3c;
        }

        .table-container {
            overflow-x: auto;
            margin-top: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px;
            text-align: right;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: #34495e;
            color: white;
            font-weight: bold;
        }
        
        tr:hover {
            background: #f5f5f5;
        }
        
        .status-active {
            background: #d4edda;
            color: #155724;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @media (max-width: 768px) {
            .nav {
                flex-direction: column;
            }
            
            .nav-btn {
                text-align: right;
                border-bottom: 1px solid #3c5570;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .product-row {
                grid-template-columns: 1fr;
                gap: 5px;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="notification-container" id="notificationContainer"></div>

    <div class="container">
        <!-- ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ -->
        <div class="login-page" id="loginPage">
            <div class="logo">Ú©Ù„Ø´ÛŒ ÙÙˆÙ…</div>
            <h1>Ø³ÛŒØ³ØªÙ… Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ Ú©Ø§Ø±Ø®Ø§Ù†Ù‡ ÛŒÙˆÙ†ÙˆÙ„ÛŒØª</h1>
            <div class="login-form">
                <div class="input-group">
                    <label for="username">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</label>
                    <input type="text" id="username" placeholder="admin" value="admin">
                </div>
                <div class="input-group">
                    <label for="password">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                    <input type="password" id="password" placeholder="1234" value="1234">
                </div>
                <button class="btn" onclick="login()">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…</button>
            </div>
        </div>

        <!-- ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ -->
        <div class="main-page" id="mainPage">
            <div class="header">
                <h1>Ú©Ø§Ø±Ø®Ø§Ù†Ù‡ ÛŒÙˆÙ†ÙˆÙ„ÛŒØª Ú©Ù„Ø´ÛŒ ÙÙˆÙ…</h1>
                <div class="user-info">
                    <span id="currentUser">Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…</span>
                    <button class="btn btn-danger btn-sm" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
                </div>
            </div>

            <div class="nav">
                <button class="nav-btn active" onclick="showTab('dashboard')">ğŸ“Š Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</button>
                <button class="nav-btn" onclick="showTab('contracts')">ğŸ“ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§</button>
                <button class="nav-btn" onclick="showTab('delivery')">ğŸšš Ù†ÙˆØ¨Øª Ø§Ø±Ø³Ø§Ù„</button>
                <button class="nav-btn" onclick="showTab('customers')">ğŸ‘¥ Ù…Ø´ØªØ±ÛŒØ§Ù†</button>
                <button class="nav-btn" onclick="showTab('workers')">ğŸ‘¨â€ğŸ’¼ Ú©Ø§Ø±Ú©Ù†Ø§Ù†</button>
                <button class="nav-btn" onclick="showTab('finance')">ğŸ’° Ù…Ø§Ù„ÛŒ</button>
                <button class="nav-btn" onclick="showTab('checks')">ğŸ¦ Ú†Ú©â€ŒÙ‡Ø§</button>
                <button class="nav-btn" onclick="showTab('invoices')">ğŸ§¾ ÙØ§Ú©ØªÙˆØ±</button>
                <button class="nav-btn" onclick="showTab('reports')">ğŸ“ˆ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</button>
                <button class="nav-btn" onclick="showTab('settings')">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
            </div>

            <div class="content">
                <!-- Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ -->
                <div id="dashboard" class="tab-content active">
                    <div class="form-section">
                        <h3>ğŸ“ˆ Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ Ø³ÛŒØ³ØªÙ…</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 24px; font-weight: bold;" id="totalContracts">Û°</div>
                                <div style="font-size: 14px; opacity: 0.9;">Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 24px; font-weight: bold;" id="totalIncome">Û°</div>
                                <div style="font-size: 14px; opacity: 0.9;">Ø¯Ø±Ø¢Ù…Ø¯ Ú©Ù„</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 24px; font-weight: bold;" id="totalCustomers">Û°</div>
                                <div style="font-size: 14px; opacity: 0.9;">Ù…Ø´ØªØ±ÛŒØ§Ù†</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 24px; font-weight: bold;" id="totalWorkers">Û°</div>
                                <div style="font-size: 14px; opacity: 0.9;">Ú©Ø§Ø±Ú©Ù†Ø§Ù†</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>ğŸš€ Ø¯Ø³ØªØ±Ø³ÛŒ Ø³Ø±ÛŒØ¹</h3>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button class="btn btn-success btn-sm" onclick="showTab('contracts')">ğŸ“ Ø«Ø¨Øª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø¬Ø¯ÛŒØ¯</button>
                            <button class="btn btn-primary btn-sm" onclick="showTab('delivery')">ğŸšš Ø«Ø¨Øª Ù†ÙˆØ¨Øª Ø§Ø±Ø³Ø§Ù„</button>
                            <button class="btn btn-info btn-sm" onclick="showTab('customers')">ğŸ‘¥ Ø«Ø¨Øª Ù…Ø´ØªØ±ÛŒ</button>
                            <button class="btn btn-warning btn-sm" onclick="showTab('finance')">ğŸ’° Ø«Ø¨Øª ØªØ±Ø§Ú©Ù†Ø´</button>
                        </div>
                    </div>
                </div>

                <!-- Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§ -->
                <div id="contracts" class="tab-content">
                    <div class="form-section">
                        <h3>ğŸ“ Ø«Ø¨Øª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ú†Ú©</h3>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ *</label>
                                <input type="text" id="contractCustomer" placeholder="Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ù…Ø´ØªØ±ÛŒ">
                            </div>
                            <div class="form-group">
                                <label>Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ *</label>
                                <input type="tel" id="contractPhone" placeholder="09123456789">
                            </div>
                            <div class="form-group">
                                <label>Ø¢Ø¯Ø±Ø³</label>
                                <textarea id="contractAddress" placeholder="Ø¢Ø¯Ø±Ø³ Ú©Ø§Ù…Ù„" rows="2"></textarea>
                            </div>
                        </div>
                        
                        <h4>Ù…Ø­ØµÙˆÙ„Ø§Øª</h4>
                        <div id="productRowsContainer">
                            <div class="product-row" data-row="1">
                                <div class="form-group">
                                    <label>Ù†ÙˆØ¹ Ù…Ø­ØµÙˆÙ„</label>
                                    <select class="productType">
                                        <option value="ÙÙˆÙ… Ø³Ù‚ÙÛŒ">ÙÙˆÙ… Ø³Ù‚ÙÛŒ</option>
                                        <option value="ÙˆØ±Ù‚ ÛŒÙˆÙ†ÙˆÙ„ÛŒØª">ÙˆØ±Ù‚ ÛŒÙˆÙ†ÙˆÙ„ÛŒØª</option>
                                        <option value="Ù¾Ø§Ù†Ù„">Ù¾Ø§Ù†Ù„</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Ù…ØªØ±Ø§Ú˜ (Ù…ØªØ±) *</label>
                                    <input type="number" class="productMeterage" placeholder="0" min="0" step="0.1" value="0" oninput="calculateContract()">
                                </div>
                                <div class="form-group">
                                    <label>Ù‚ÛŒÙ…Øª ÙÛŒ Ù…ØªØ± (ØªÙˆÙ…Ø§Ù†) *</label>
                                    <input type="number" class="productPrice" placeholder="0" min="0" value="0" oninput="calculateContract()">
                                </div>
                                <div class="form-group">
                                    <label>Ù…Ø¨Ù„Øº Ú©Ù„ (ØªÙˆÙ…Ø§Ù†)</label>
                                    <input type="text" class="productTotal" value="0" readonly style="background: #f8f9fa;">
                                </div>
                                <button type="button" class="btn btn-danger btn-sm" onclick="removeProductRow(1)" style="display: none;">Ø­Ø°Ù</button>
                            </div>
                        </div>
                        
                        <button type="button" class="btn btn-info btn-sm" onclick="addProductRow()">+ Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„</button>

                        <div class="form-grid" style="margin-top: 20px;">
                            <div class="form-group">
                                <label>Ù¾ÛŒØ´â€ŒÙ¾Ø±Ø¯Ø§Ø®Øª Ù†Ù‚Ø¯ÛŒ (ØªÙˆÙ…Ø§Ù†)</label>
                                <input type="number" id="contractAdvance" placeholder="0" min="0" value="0" oninput="calculateContract()">
                            </div>
                            <div class="form-group">
                                <label>ØªØ§Ø±ÛŒØ® ØªØ­ÙˆÛŒÙ„</label>
                                <input type="text" id="deliveryDate" placeholder="1402/10/15">
                            </div>
                        </div>

                        <!-- Ø¨Ø®Ø´ Ú†Ú©â€ŒÙ‡Ø§ -->
                        <h4 style="margin-top: 20px;">ğŸ¦ Ú†Ú©â€ŒÙ‡Ø§ÛŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯</h4>
                        <div id="checkRowsContainer">
                            <div class="check-row" data-check="1">
                                <div>
                                    <div class="form-grid" style="grid-template-columns: 1fr 1fr 1fr 1fr; gap: 5px;">
                                        <div class="form-group">
                                            <label>Ø´Ù…Ø§Ø±Ù‡ Ú†Ú©</label>
                                            <input type="text" class="checkNumber" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ú†Ú©" oninput="calculateContract()">
                                        </div>
                                        <div class="form-group">
                                            <label>Ù…Ø¨Ù„Øº (ØªÙˆÙ…Ø§Ù†)</label>
                                            <input type="number" class="checkAmount" placeholder="0" min="0" value="0" oninput="calculateContract()">
                                        </div>
                                        <div class="form-group">
                                            <label>ØªØ§Ø±ÛŒØ® Ø³Ø±Ø±Ø³ÛŒØ¯</label>
                                            <input type="text" class="checkDueDate" placeholder="1402/10/15">
                                        </div>
                                        <div class="form-group">
                                            <label>Ø¨Ø§Ù†Ú©</label>
                                            <input type="text" class="checkBank" placeholder="Ù†Ø§Ù… Ø¨Ø§Ù†Ú©">
                                        </div>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-danger btn-sm" onclick="removeCheckRow(1)" style="display: none;">Ø­Ø°Ù</button>
                            </div>
                        </div>
                        
                        <button type="button" class="btn btn-info btn-sm" onclick="addCheckRow()">+ Ø§ÙØ²ÙˆØ¯Ù† Ú†Ú©</button>

                        <!-- Ù†Ù…Ø§ÛŒØ´ Ù…Ø­Ø§Ø³Ø¨Ø§Øª -->
                        <div style="background: #e8f4fd; padding: 15px; border-radius: 8px; margin: 15px 0; text-align: center; font-weight: bold;">
                            <div style="margin: 5px 0;" id="contractTotalDisplay">Ø¬Ù…Ø¹ Ú©Ù„ Ù…Ø­ØµÙˆÙ„Ø§Øª: 0 ØªÙˆÙ…Ø§Ù†</div>
                            <div style="margin: 5px 0;" id="contractAdvanceDisplay">Ù¾ÛŒØ´ Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ù‚Ø¯ÛŒ: 0 ØªÙˆÙ…Ø§Ù†</div>
                            <div style="margin: 5px 0;" id="contractCheckDisplay">Ù…Ø¬Ù…ÙˆØ¹ Ú†Ú©â€ŒÙ‡Ø§: 0 ØªÙˆÙ…Ø§Ù†</div>
                            <div style="margin: 5px 0; color: #e74c3c; font-size: 16px;" id="contractBalanceDisplay">Ù…Ø§Ù†Ø¯Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª: 0 ØªÙˆÙ…Ø§Ù†</div>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="btn btn-success" onclick="saveContract()">âœ… Ø«Ø¨Øª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ùˆ Ú†Ú©â€ŒÙ‡Ø§</button>
                            <button class="btn btn-warning" onclick="resetContractForm()">ğŸ”„ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ±Ù…</button>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>ğŸ“‹ Ù„ÛŒØ³Øª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§</h3>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Ø±Ø¯ÛŒÙ</th>
                                        <th>Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ</th>
                                        <th>ØªÙ…Ø§Ø³</th>
                                        <th>Ù…Ø¨Ù„Øº Ú©Ù„</th>
                                        <th>Ù†Ù‚Ø¯ÛŒ</th>
                                        <th>Ú†Ú©</th>
                                        <th>Ù…Ø§Ù†Ø¯Ù‡</th>
                                        <th>ØªØ§Ø±ÛŒØ®</th>
                                        <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                    </tr>
                                </thead>
                                <tbody id="contractsTable">
                                    <tr><td colspan="9" style="text-align: center; padding: 20px;">Ù‡ÛŒÚ† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Ù†ÙˆØ¨Øª Ø§Ø±Ø³Ø§Ù„ -->
                <div id="delivery" class="tab-content">
                    <div class="form-section">
                        <h3>ğŸšš Ø³ÛŒØ³ØªÙ… Ù†ÙˆØ¨Øªâ€ŒØ¯Ù‡ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¨Ø§Ø±</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Ù…Ø´ØªØ±ÛŒ *</label>
                                <input type="text" id="deliveryCustomer" placeholder="Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ">
                            </div>
                            <div class="form-group">
                                <label>ØªØ§Ø±ÛŒØ® Ø§Ø±Ø³Ø§Ù„ *</label>
                                <input type="text" id="deliveryDateInput" placeholder="1402/10/15">
                            </div>
                            <div class="form-group">
                                <label>Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ</label>
                                <select id="deliveryTimeSlot">
                                    <option value="8-10">Û¸-Û±Û° ØµØ¨Ø­</option>
                                    <option value="10-12">Û±Û°-Û±Û² Ø¸Ù‡Ø±</option>
                                    <option value="12-14">Û±Û²-Û±Û´ Ø¨Ø¹Ø¯Ø§Ø²Ø¸Ù‡Ø±</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§Ø±Ø³Ø§Ù„</label>
                            <textarea id="deliveryNotes" placeholder="Ø¢Ø¯Ø±Ø³ Ø¯Ù‚ÛŒÙ‚ØŒ ØªÙˆØ¶ÛŒØ­Ø§Øª..." rows="3"></textarea>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="btn btn-success" onclick="addDelivery()">âœ… Ø«Ø¨Øª Ù†ÙˆØ¨Øª Ø§Ø±Ø³Ø§Ù„</button>
                            <button class="btn btn-warning" onclick="resetDeliveryForm()">ğŸ”„ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>ğŸ“‹ Ù†ÙˆØ¨Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„</h3>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Ø±Ø¯ÛŒÙ</th>
                                        <th>Ù…Ø´ØªØ±ÛŒ</th>
                                        <th>ØªØ§Ø±ÛŒØ®</th>
                                        <th>Ø²Ù…Ø§Ù†</th>
                                        <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                    </tr>
                                </thead>
                                <tbody id="deliveriesTable">
                                    <tr><td colspan="5" style="text-align: center; padding: 20px;">Ù‡ÛŒÚ† Ù†ÙˆØ¨Øª Ø§Ø±Ø³Ø§Ù„ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Ù…Ø´ØªØ±ÛŒØ§Ù† -->
                <div id="customers" class="tab-content">
                    <div class="form-section">
                        <h3>ğŸ‘¥ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø´ØªØ±ÛŒØ§Ù†</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ *</label>
                                <input type="text" id="customerName" placeholder="Ù†Ø§Ù… Ú©Ø§Ù…Ù„">
                            </div>
                            <div class="form-group">
                                <label>Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ *</label>
                                <input type="tel" id="customerPhone" placeholder="09123456789">
                            </div>
                            <div class="form-group">
                                <label>Ù†ÙˆØ¹ Ù…Ø´ØªØ±ÛŒ</label>
                                <select id="customerType">
                                    <option value="Ø¹Ø§Ø¯ÛŒ">Ø¹Ø§Ø¯ÛŒ</option>
                                    <option value="VIP">VIP</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Ø¢Ø¯Ø±Ø³</label>
                            <textarea id="customerAddress" placeholder="Ø¢Ø¯Ø±Ø³ Ú©Ø§Ù…Ù„" rows="2"></textarea>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="btn btn-success" onclick="addCustomer()">âœ… Ø«Ø¨Øª Ù…Ø´ØªØ±ÛŒ</button>
                            <button class="btn btn-warning" onclick="resetCustomerForm()">ğŸ”„ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>ğŸ“‹ Ù„ÛŒØ³Øª Ù…Ø´ØªØ±ÛŒØ§Ù†</h3>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Ø±Ø¯ÛŒÙ</th>
                                        <th>Ù†Ø§Ù…</th>
                                        <th>ØªÙ…Ø§Ø³</th>
                                        <th>Ù†ÙˆØ¹</th>
                                        <th>Ø¢Ø¯Ø±Ø³</th>
                                        <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                    </tr>
                                </thead>
                                <tbody id="customersTable">
                                    <tr><td colspan="6" style="text-align: center; padding: 20px;">Ù‡ÛŒÚ† Ù…Ø´ØªØ±ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Ú©Ø§Ø±Ú©Ù†Ø§Ù† -->
                <div id="workers" class="tab-content">
                    <div class="form-section">
                        <h3>ğŸ‘¨â€ğŸ’¼ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ú©Ù†Ø§Ù†</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ *</label>
                                <input type="text" id="workerName" placeholder="Ù†Ø§Ù… Ú©Ø§Ù…Ù„">
                            </div>
                            <div class="form-group">
                                <label>Ú©Ø¯ Ù…Ù„ÛŒ</label>
                                <input type="text" id="workerNationalCode" placeholder="Ú©Ø¯ Ù…Ù„ÛŒ">
                            </div>
                            <div class="form-group">
                                <label>Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³</label>
                                <input type="tel" id="workerPhone" placeholder="09123456789">
                            </div>
                            <div class="form-group">
                                <label>Ø³Ù…Øª</label>
                                <select id="workerPosition">
                                    <option value="ØªÙˆÙ„ÛŒØ¯">ØªÙˆÙ„ÛŒØ¯</option>
                                    <option value="Ø§Ø±Ø³Ø§Ù„">Ø§Ø±Ø³Ø§Ù„</option>
                                    <option value="Ø§Ø¯Ø§Ø±ÛŒ">Ø§Ø¯Ø§Ø±ÛŒ</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Ø­Ù‚ÙˆÙ‚ Ù¾Ø§ÛŒÙ‡ (ØªÙˆÙ…Ø§Ù†)</label>
                                <input type="number" id="workerSalary" placeholder="Ù…Ø¨Ù„Øº Ø­Ù‚ÙˆÙ‚">
                            </div>
                            <div class="form-group">
                                <label>ØªØ§Ø±ÛŒØ® Ø§Ø³ØªØ®Ø¯Ø§Ù…</label>
                                <input type="text" id="workerHireDate" placeholder="1402/10/15">
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="btn btn-success" onclick="addWorker()">âœ… Ø«Ø¨Øª Ú©Ø§Ø±Ù…Ù†Ø¯</button>
                            <button class="btn btn-warning" onclick="resetWorkerForm()">ğŸ”„ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>ğŸ“‹ Ù„ÛŒØ³Øª Ú©Ø§Ø±Ú©Ù†Ø§Ù†</h3>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Ø±Ø¯ÛŒÙ</th>
                                        <th>Ù†Ø§Ù…</th>
                                        <th>Ú©Ø¯ Ù…Ù„ÛŒ</th>
                                        <th>Ø³Ù…Øª</th>
                                        <th>Ø­Ù‚ÙˆÙ‚</th>
                                        <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                    </tr>
                                </thead>
                                <tbody id="workersTable">
                                    <tr><td colspan="6" style="text-align: center; padding: 20px;">Ù‡ÛŒÚ† Ú©Ø§Ø±Ù…Ù†Ø¯ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Ù…Ø§Ù„ÛŒ -->
                <div id="finance" class="tab-content">
                    <div class="form-section">
                        <h3>ğŸ’° Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø§Ù„ÛŒ</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Ù†ÙˆØ¹ ØªØ±Ø§Ú©Ù†Ø´ *</label>
                                <select id="transactionType">
                                    <option value="income">Ø¯Ø±Ø¢Ù…Ø¯</option>
                                    <option value="expense">Ù‡Ø²ÛŒÙ†Ù‡</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ù…Ø¨Ù„Øº (ØªÙˆÙ…Ø§Ù†) *</label>
                                <input type="number" id="transactionAmount" placeholder="Ù…Ø¨Ù„Øº">
                            </div>
                            <div class="form-group">
                                <label>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</label>
                                <select id="transactionCategory">
                                    <option value="ÙØ±ÙˆØ´">ÙØ±ÙˆØ´</option>
                                    <option value="Ø­Ù‚ÙˆÙ‚">Ø­Ù‚ÙˆÙ‚</option>
                                    <option value="Ø³Ø§ÛŒØ±">Ø³Ø§ÛŒØ±</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Ø´Ø±Ø­ ØªØ±Ø§Ú©Ù†Ø´</label>
                            <textarea id="transactionDescription" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªØ±Ø§Ú©Ù†Ø´..." rows="3"></textarea>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="btn btn-success" onclick="addTransaction()">âœ… Ø«Ø¨Øª ØªØ±Ø§Ú©Ù†Ø´</button>
                            <button class="btn btn-warning" onclick="resetTransactionForm()">ğŸ”„ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>ğŸ“Š Ø¢Ù…Ø§Ø± Ù…Ø§Ù„ÛŒ</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div style="background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 24px; font-weight: bold;" id="totalIncomeFinance">Û°</div>
                                <div style="font-size: 14px; opacity: 0.9;">Ú©Ù„ Ø¯Ø±Ø¢Ù…Ø¯</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #f44336 0%, #c62828 100%); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 24px; font-weight: bold;" id="totalExpenseFinance">Û°</div>
                                <div style="font-size: 14px; opacity: 0.9;">Ú©Ù„ Ù‡Ø²ÛŒÙ†Ù‡</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #2196F3 0%, #1565C0 100%); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 24px; font-weight: bold;" id="netProfit">Û°</div>
                                <div style="font-size: 14px; opacity: 0.9;">Ø³ÙˆØ¯ Ø®Ø§Ù„Øµ</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>ğŸ“‹ ØªØ§Ø±ÛŒØ®Ú†Ù‡ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§</h3>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Ø±Ø¯ÛŒÙ</th>
                                        <th>ØªØ§Ø±ÛŒØ®</th>
                                        <th>Ù†ÙˆØ¹</th>
                                        <th>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</th>
                                        <th>Ø´Ø±Ø­</th>
                                        <th>Ù…Ø¨Ù„Øº</th>
                                        <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                    </tr>
                                </thead>
                                <tbody id="transactionsTable">
                                    <tr><td colspan="7" style="text-align: center; padding: 20px;">Ù‡ÛŒÚ† ØªØ±Ø§Ú©Ù†Ø´ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Ú†Ú©â€ŒÙ‡Ø§ -->
                <div id="checks" class="tab-content">
                    <div class="form-section">
                        <h3>ğŸ¦ Ù„ÛŒØ³Øª ØªÙ…Ø§Ù… Ú†Ú©â€ŒÙ‡Ø§</h3>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Ø±Ø¯ÛŒÙ</th>
                                        <th>Ø´Ù…Ø§Ø±Ù‡ Ú†Ú©</th>
                                        <th>Ù…Ø´ØªØ±ÛŒ</th>
                                        <th>Ù…Ø¨Ù„Øº</th>
                                        <th>Ø³Ø±Ø±Ø³ÛŒØ¯</th>
                                        <th>Ø¨Ø§Ù†Ú©</th>
                                        <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                        <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                    </tr>
                                </thead>
                                <tbody id="allChecksTable">
                                    <tr><td colspan="8" style="text-align: center; padding: 20px;">Ù‡ÛŒÚ† Ú†Ú©ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ÙØ§Ú©ØªÙˆØ± -->
                <div id="invoices" class="tab-content">
                    <div class="form-section">
                        <h3>ğŸ§¾ Ø³ÛŒØ³ØªÙ… ÙØ§Ú©ØªÙˆØ±</h3>
                        <p style="text-align: center; padding: 40px; color: #666;">
                            Ø§ÛŒÙ† Ù…Ø§Ú˜ÙˆÙ„ Ø¯Ø± Ø­Ø§Ù„ ØªÙˆØ³Ø¹Ù‡ Ø§Ø³Øª. Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ ÙØ¹Ø§Ù„ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯.
                        </p>
                    </div>
                </div>

                <!-- Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ -->
                <div id="reports" class="tab-content">
                    <div class="form-section">
                        <h3>ğŸ“ˆ Ø³ÛŒØ³ØªÙ… Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Ù†ÙˆØ¹ Ú¯Ø²Ø§Ø±Ø´</label>
                                <select id="reportType">
                                    <option value="financial">Ú¯Ø²Ø§Ø±Ø´ Ù…Ø§Ù„ÛŒ</option>
                                    <option value="contracts">Ú¯Ø²Ø§Ø±Ø´ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø§Ø² ØªØ§Ø±ÛŒØ®</label>
                                <input type="text" id="reportFromDate" placeholder="1402/10/01">
                            </div>
                            <div class="form-group">
                                <label>ØªØ§ ØªØ§Ø±ÛŒØ®</label>
                                <input type="text" id="reportToDate" placeholder="1402/10/30">
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="btn btn-success" onclick="generateReport()">ğŸ“Š Ø§ÛŒØ¬Ø§Ø¯ Ú¯Ø²Ø§Ø±Ø´</button>
                            <button class="btn btn-primary" onclick="printReport()">ğŸ–¨ï¸ Ú†Ø§Ù¾ Ú¯Ø²Ø§Ø±Ø´</button>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>ğŸ“‹ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ú¯Ø²Ø§Ø±Ø´</h3>
                        <div id="reportPreview">
                            <p style="text-align: center; color: #666; padding: 40px;">
                                Ú¯Ø²Ø§Ø±Ø´ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- ØªÙ†Ø¸ÛŒÙ…Ø§Øª -->
                <div id="settings" class="tab-content">
                    <div class="form-section">
                        <h3>âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…</h3>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Ù†Ø§Ù… Ø´Ø±Ú©Øª</label>
                                <input type="text" id="companyName" value="Ú©Ø§Ø±Ø®Ø§Ù†Ù‡ ÛŒÙˆÙ†ÙˆÙ„ÛŒØª Ú©Ù„Ø´ÛŒ ÙÙˆÙ…">
                            </div>
                            <div class="form-group">
                                <label>Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³</label>
                                <input type="tel" id="companyPhone" value="09149431013">
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="btn btn-success" onclick="saveSettings()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
                            <button class="btn btn-warning" onclick="showSystemInfo()">â„¹ï¸ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³ÛŒØ³ØªÙ…</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // Ø³ÛŒØ³ØªÙ… Ú©Ø§Ù…Ù„ Ø¨Ø§ ØªÙ…Ø§Ù… ØªØ¨â€ŒÙ‡Ø§
        // ============================================

        // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
        let appData = {
            contracts: [],
            customers: [],
            workers: [],
            transactions: [],
            checks: [],
            deliveries: [],
            settings: {
                companyName: "Ú©Ø§Ø±Ø®Ø§Ù†Ù‡ ÛŒÙˆÙ†ÙˆÙ„ÛŒØª Ú©Ù„Ø´ÛŒ ÙÙˆÙ…",
                companyPhone: "09149431013"
            }
        };

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
        function loadData() {
            const saved = localStorage.getItem('accountingCompleteData');
            if (saved) {
                appData = JSON.parse(saved);
            }
        }

        // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
        function saveData() {
            localStorage.setItem('accountingCompleteData', JSON.stringify(appData));
        }

        // Ù†Ù…Ø§ÛŒØ´ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <span>${type === 'error' ? 'âŒ' : 'âœ…'}</span>
                <span>${message}</span>
                <button onclick="this.parentElement.remove()" style="margin-right: auto; background: none; border: none; cursor: pointer;">âœ•</button>
            `;
            
            const container = document.getElementById('notificationContainer');
            container.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 3000);
        }

        // =====================
        // Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ±ÙˆØ¯ Ùˆ Ø®Ø±ÙˆØ¬
        // =====================
        function login() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;

            if (username === 'admin' && password === '1234') {
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('mainPage').style.display = 'block';
                loadData();
                updateDashboard();
                displayContracts();
                displayCustomers();
                displayWorkers();
                displayTransactions();
                displayAllChecks();
                displayDeliveries();
                loadSettings();
                showNotification('Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…');
            } else {
                showNotification('Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª', 'error');
            }
        }

        function logout() {
            if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø³ÛŒØ³ØªÙ… Ø®Ø§Ø±Ø¬ Ù…ÛŒâ€ŒØ´ÙˆÛŒØ¯ØŸ')) {
                saveData();
                document.getElementById('loginPage').style.display = 'block';
                document.getElementById('mainPage').style.display = 'none';
            }
        }

        // =====================
        // Ù…Ø¯ÛŒØ±ÛŒØª ØªØ¨â€ŒÙ‡Ø§
        // =====================
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // =====================
        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
        // =====================
        function updateDashboard() {
            // ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§
            document.getElementById('totalContracts').textContent = appData.contracts.length;
            
            // Ø¯Ø±Ø¢Ù…Ø¯ Ú©Ù„ (Ø§Ø² ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø¢Ù…Ø¯ÛŒ + Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§)
            const incomeTransactions = appData.transactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
            
            const incomeContracts = appData.contracts
                .reduce((sum, c) => sum + c.totalAmount, 0);
            
            document.getElementById('totalIncome').textContent = 
                (incomeTransactions + incomeContracts).toLocaleString('fa-IR');
            
            // ØªØ¹Ø¯Ø§Ø¯ Ù…Ø´ØªØ±ÛŒØ§Ù†
            document.getElementById('totalCustomers').textContent = appData.customers.length;
            
            // ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ú©Ù†Ø§Ù†
            document.getElementById('totalWorkers').textContent = appData.workers.length;
        }

        // ============================================
        // Ù…Ø¯ÛŒØ±ÛŒØª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§ Ø¨Ø§ Ú†Ú©
        // ============================================
        let productRowCount = 1;
        let checkRowCount = 1;

        function addProductRow() {
            productRowCount++;
            const newRow = document.createElement('div');
            newRow.className = 'product-row';
            newRow.setAttribute('data-row', productRowCount);
            newRow.innerHTML = `
                <div class="form-group">
                    <label>Ù†ÙˆØ¹ Ù…Ø­ØµÙˆÙ„</label>
                    <select class="productType">
                        <option value="ÙÙˆÙ… Ø³Ù‚ÙÛŒ">ÙÙˆÙ… Ø³Ù‚ÙÛŒ</option>
                        <option value="ÙˆØ±Ù‚ ÛŒÙˆÙ†ÙˆÙ„ÛŒØª">ÙˆØ±Ù‚ ÛŒÙˆÙ†ÙˆÙ„ÛŒØª</option>
                        <option value="Ù¾Ø§Ù†Ù„">Ù¾Ø§Ù†Ù„</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ù…ØªØ±Ø§Ú˜ (Ù…ØªØ±) *</label>
                    <input type="number" class="productMeterage" placeholder="0" min="0" step="0.1" value="0" oninput="calculateContract()">
                </div>
                <div class="form-group">
                    <label>Ù‚ÛŒÙ…Øª ÙÛŒ Ù…ØªØ± (ØªÙˆÙ…Ø§Ù†) *</label>
                    <input type="number" class="productPrice" placeholder="0" min="0" value="0" oninput="calculateContract()">
                </div>
                <div class="form-group">
                    <label>Ù…Ø¨Ù„Øº Ú©Ù„ (ØªÙˆÙ…Ø§Ù†)</label>
                    <input type="text" class="productTotal" value="0" readonly style="background: #f8f9fa;">
                </div>
                <button type="button" class="btn btn-danger btn-sm" onclick="removeProductRow(${productRowCount})">Ø­Ø°Ù</button>
            `;
            document.getElementById('productRowsContainer').appendChild(newRow);
            calculateContract();
        }

        function removeProductRow(rowNumber) {
            const row = document.querySelector(`[data-row="${rowNumber}"]`);
            if (row && productRowCount > 1) {
                row.remove();
                productRowCount--;
                calculateContract();
            }
        }

        function addCheckRow() {
            checkRowCount++;
            const newRow = document.createElement('div');
            newRow.className = 'check-row';
            newRow.setAttribute('data-check', checkRowCount);
            newRow.innerHTML = `
                <div>
                    <div class="form-grid" style="grid-template-columns: 1fr 1fr 1fr 1fr; gap: 5px;">
                        <div class="form-group">
                            <label>Ø´Ù…Ø§Ø±Ù‡ Ú†Ú©</label>
                            <input type="text" class="checkNumber" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ú†Ú©" oninput="calculateContract()">
                        </div>
                        <div class="form-group">
                            <label>Ù…Ø¨Ù„Øº (ØªÙˆÙ…Ø§Ù†)</label>
                            <input type="number" class="checkAmount" placeholder="0" min="0" value="0" oninput="calculateContract()">
                        </div>
                        <div class="form-group">
                            <label>ØªØ§Ø±ÛŒØ® Ø³Ø±Ø±Ø³ÛŒØ¯</label>
                            <input type="text" class="checkDueDate" placeholder="1402/10/15">
                        </div>
                        <div class="form-group">
                            <label>Ø¨Ø§Ù†Ú©</label>
                            <input type="text" class="checkBank" placeholder="Ù†Ø§Ù… Ø¨Ø§Ù†Ú©">
                        </div>
                    </div>
                </div>
                <button type="button" class="btn btn-danger btn-sm" onclick="removeCheckRow(${checkRowCount})">Ø­Ø°Ù</button>
            `;
            document.getElementById('checkRowsContainer').appendChild(newRow);
            calculateContract();
        }

        function removeCheckRow(checkNumber) {
            const row = document.querySelector(`[data-check="${checkNumber}"]`);
            if (row && checkRowCount > 1) {
                row.remove();
                checkRowCount--;
                calculateContract();
            }
        }

        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø¨Ø§ Ú†Ú©
        function calculateContract() {
            // 1. Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø¬Ù…ÙˆØ¹ Ù…Ø­ØµÙˆÙ„Ø§Øª
            let totalProducts = 0;
            const productRows = document.querySelectorAll('.product-row');
            productRows.forEach(row => {
                const meterage = parseFloat(row.querySelector('.productMeterage').value) || 0;
                const price = parseFloat(row.querySelector('.productPrice').value) || 0;
                const rowTotal = meterage * price;
                
                row.querySelector('.productTotal').value = rowTotal.toLocaleString('fa-IR');
                totalProducts += rowTotal;
            });
            
            // 2. Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù¾ÛŒØ´ Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ù‚Ø¯ÛŒ
            const advance = parseFloat(document.getElementById('contractAdvance').value) || 0;
            
            // 3. Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø¬Ù…ÙˆØ¹ Ú†Ú©â€ŒÙ‡Ø§
            let totalChecks = 0;
            const checkRows = document.querySelectorAll('.check-row');
            checkRows.forEach(row => {
                const checkAmount = parseFloat(row.querySelector('.checkAmount').value) || 0;
                totalChecks += checkAmount;
            });
            
            // 4. Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø§Ù†Ø¯Ù‡
            const balance = totalProducts - advance - totalChecks;
            
            // 5. Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬
            document.getElementById('contractTotalDisplay').textContent = 
                `Ø¬Ù…Ø¹ Ú©Ù„ Ù…Ø­ØµÙˆÙ„Ø§Øª: ${totalProducts.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†`;
            
            document.getElementById('contractAdvanceDisplay').textContent = 
                `Ù¾ÛŒØ´ Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ù‚Ø¯ÛŒ: ${advance.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†`;
            
            document.getElementById('contractCheckDisplay').textContent = 
                `Ù…Ø¬Ù…ÙˆØ¹ Ú†Ú©â€ŒÙ‡Ø§: ${totalChecks.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†`;
            
            document.getElementById('contractBalanceDisplay').textContent = 
                `Ù…Ø§Ù†Ø¯Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª: ${balance.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†`;
            
            // 6. ØªØºÛŒÛŒØ± Ø±Ù†Ú¯ Ù…Ø§Ù†Ø¯Ù‡
            const balanceElement = document.getElementById('contractBalanceDisplay');
            if (balance > 0) {
                balanceElement.style.color = '#27ae60'; // Ø³Ø¨Ø² - Ù‡Ù†ÙˆØ² Ù…Ø´ØªØ±ÛŒ Ø¨Ø¯Ù‡Ú©Ø§Ø± Ø§Ø³Øª
            } else if (balance < 0) {
                balanceElement.style.color = '#e74c3c'; // Ù‚Ø±Ù…Ø² - Ø§Ø¶Ø§ÙÙ‡ Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯Ù‡
            } else {
                balanceElement.style.color = '#f39c12'; // Ù†Ø§Ø±Ù†Ø¬ÛŒ - ØªØ³ÙˆÛŒÙ‡ Ú©Ø§Ù…Ù„
            }
            
            return { totalProducts, advance, totalChecks, balance };
        }

        // Ø«Ø¨Øª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø¨Ø§ Ú†Ú©â€ŒÙ‡Ø§
        function saveContract() {
            // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
            const customer = document.getElementById('contractCustomer').value.trim();
            const phone = document.getElementById('contractPhone').value.trim();
            
            if (!customer || !phone) {
                showNotification('Ù„Ø·ÙØ§ Ù†Ø§Ù… Ùˆ Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ù…Ø´ØªØ±ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            // Ù…Ø­Ø§Ø³Ø¨Ø§Øª
            const calculations = calculateContract();
            
            // Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª
            if (calculations.totalProducts <= 0) {
                showNotification('Ù„Ø·ÙØ§ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ù…Ø­ØµÙˆÙ„ Ø¨Ø§ Ù…Ø¨Ù„Øº Ù…Ø«Ø¨Øª ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            // Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø­ØµÙˆÙ„Ø§Øª
            const products = [];
            const productRows = document.querySelectorAll('.product-row');
            productRows.forEach(row => {
                const meterage = parseFloat(row.querySelector('.productMeterage').value) || 0;
                const price = parseFloat(row.querySelector('.productPrice').value) || 0;
                if (meterage > 0 && price > 0) {
                    products.push({
                        type: row.querySelector('.productType').value,
                        meterage: meterage,
                        price: price,
                        total: meterage * price
                    });
                }
            });
            
            // Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú†Ú©â€ŒÙ‡Ø§
            const checks = [];
            const checkRows = document.querySelectorAll('.check-row');
            checkRows.forEach(row => {
                const checkNumber = row.querySelector('.checkNumber').value.trim();
                const checkAmount = parseFloat(row.querySelector('.checkAmount').value) || 0;
                const dueDate = row.querySelector('.checkDueDate').value;
                const bank = row.querySelector('.checkBank').value.trim();
                
                if (checkNumber && checkAmount > 0 && dueDate && bank) {
                    checks.push({
                        number: checkNumber,
                        amount: checkAmount,
                        dueDate: dueDate,
                        bank: bank,
                        status: 'Ø¯Ø± Ø¬Ø±ÛŒØ§Ù†'
                    });
                }
            });
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯
            const contractId = Date.now();
            const contract = {
                id: contractId,
                customer: customer,
                phone: phone,
                address: document.getElementById('contractAddress').value || '-',
                products: products,
                checks: checks,
                totalAmount: calculations.totalProducts,
                advance: calculations.advance,
                checkAmount: calculations.totalChecks,
                balance: calculations.balance,
                deliveryDate: document.getElementById('deliveryDate').value || '-',
                date: new Date().toLocaleDateString('fa-IR'),
                status: 'ÙØ¹Ø§Ù„'
            };
            
            // Ø°Ø®ÛŒØ±Ù‡ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯
            appData.contracts.push(contract);
            
            // Ø°Ø®ÛŒØ±Ù‡ Ú†Ú©â€ŒÙ‡Ø§ Ø¯Ø± Ù„ÛŒØ³Øª Ø§ØµÙ„ÛŒ
            checks.forEach(check => {
                const checkData = {
                    id: Date.now() + Math.random(),
                    contractId: contractId,
                    customer: customer,
                    number: check.number,
                    amount: check.amount,
                    dueDate: check.dueDate,
                    bank: check.bank,
                    status: 'Ø¯Ø± Ø¬Ø±ÛŒØ§Ù†',
                    createdDate: new Date().toLocaleDateString('fa-IR')
                };
                appData.checks.push(checkData);
            });
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù…Ø´ØªØ±ÛŒ
            addCustomerIfNotExists(customer, phone);
            
            // Ø«Ø¨Øª ØªØ±Ø§Ú©Ù†Ø´ Ø¯Ø±Ø¢Ù…Ø¯ Ø§Ø² Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯
            const transaction = {
                id: Date.now(),
                type: 'income',
                amount: calculations.totalProducts,
                category: 'ÙØ±ÙˆØ´',
                description: `Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø¨Ø§ ${customer}`,
                date: new Date().toLocaleDateString('fa-IR')
            };
            appData.transactions.push(transaction);
            
            // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
            saveData();
            
            // Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆÙÙ‚ÛŒØª
            showNotification(`Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø¨Ø§ ${checks.length} Ú†Ú© Ø«Ø¨Øª Ø´Ø¯!
            Ù…Ø¨Ù„Øº Ú©Ù„: ${calculations.totalProducts.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†
            Ù†Ù‚Ø¯ÛŒ: ${calculations.advance.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†
            Ú†Ú©: ${calculations.totalChecks.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†
            Ù…Ø§Ù†Ø¯Ù‡: ${calculations.balance.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†`);
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´
            displayContracts();
            displayAllChecks();
            displayTransactions();
            updateDashboard();
            updateFinanceStats();
            resetContractForm();
        }

        // Ù†Ù…Ø§ÛŒØ´ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§
        function displayContracts() {
            const contractsTable = document.getElementById('contractsTable');
            
            if (appData.contracts.length === 0) {
                contractsTable.innerHTML = '<tr><td colspan="9" style="text-align: center; padding: 20px;">Ù‡ÛŒÚ† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</td></tr>';
                return;
            }
            
            let html = '';
            appData.contracts.forEach((contract, index) => {
                html += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${contract.customer}</td>
                        <td>${contract.phone}</td>
                        <td>${contract.totalAmount.toLocaleString('fa-IR')}</td>
                        <td>${contract.advance.toLocaleString('fa-IR')}</td>
                        <td>${contract.checkAmount.toLocaleString('fa-IR')}</td>
                        <td style="color: ${contract.balance > 0 ? '#27ae60' : contract.balance < 0 ? '#e74c3c' : '#f39c12'}; font-weight: bold;">
                            ${contract.balance.toLocaleString('fa-IR')}
                        </td>
                        <td>${contract.date}</td>
                        <td>
                            <button class="btn btn-info btn-sm" onclick="viewContract(${contract.id})">Ù…Ø´Ø§Ù‡Ø¯Ù‡</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteContract(${contract.id})">Ø­Ø°Ù</button>
                        </td>
                    </tr>
                `;
            });
            
            contractsTable.innerHTML = html;
        }

        // Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯
        function viewContract(contractId) {
            const contract = appData.contracts.find(c => c.id === contractId);
            if (!contract) return;
            
            let details = `
                <h4>Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯</h4>
                <p><strong>Ù…Ø´ØªØ±ÛŒ:</strong> ${contract.customer}</p>
                <p><strong>ØªÙ…Ø§Ø³:</strong> ${contract.phone}</p>
                <p><strong>ØªØ§Ø±ÛŒØ®:</strong> ${contract.date}</p>
                <hr>
                <h5>Ù…Ø­ØµÙˆÙ„Ø§Øª:</h5>
            `;
            
            contract.products.forEach((product, index) => {
                details += `
                    <p>${index + 1}. ${product.type} - ${product.meterage} Ù…ØªØ± Ã— ${product.price.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù† = ${product.total.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                `;
            });
            
            details += `
                <hr>
                <p><strong>Ù…Ø¨Ù„Øº Ú©Ù„:</strong> ${contract.totalAmount.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                <p><strong>Ù¾ÛŒØ´ Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ù‚Ø¯ÛŒ:</strong> ${contract.advance.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                <p><strong>Ù…Ø¬Ù…ÙˆØ¹ Ú†Ú©â€ŒÙ‡Ø§:</strong> ${contract.checkAmount.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                <p><strong>Ù…Ø§Ù†Ø¯Ù‡:</strong> ${contract.balance.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
            `;
            
            if (contract.checks && contract.checks.length > 0) {
                details += `<hr><h5>Ú†Ú©â€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯:</h5>`;
                contract.checks.forEach((check, index) => {
                    details += `
                        <p>${index + 1}. Ø´Ù…Ø§Ø±Ù‡: ${check.number} - Ù…Ø¨Ù„Øº: ${check.amount.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù† - Ø³Ø±Ø±Ø³ÛŒØ¯: ${check.dueDate} - Ø¨Ø§Ù†Ú©: ${check.bank}</p>
                    `;
                });
            }
            
            alert(details);
        }

        // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ ÙØ±Ù… Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯
        function resetContractForm() {
            document.getElementById('contractCustomer').value = '';
            document.getElementById('contractPhone').value = '';
            document.getElementById('contractAddress').value = '';
            document.getElementById('contractAdvance').value = '0';
            document.getElementById('deliveryDate').value = '';
            
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª
            productRowCount = 1;
            document.getElementById('productRowsContainer').innerHTML = `
                <div class="product-row" data-row="1">
                    <div class="form-group">
                        <label>Ù†ÙˆØ¹ Ù…Ø­ØµÙˆÙ„</label>
                        <select class="productType">
                            <option value="ÙÙˆÙ… Ø³Ù‚ÙÛŒ">ÙÙˆÙ… Ø³Ù‚ÙÛŒ</option>
                            <option value="ÙˆØ±Ù‚ ÛŒÙˆÙ†ÙˆÙ„ÛŒØª">ÙˆØ±Ù‚ ÛŒÙˆÙ†ÙˆÙ„ÛŒØª</option>
                            <option value="Ù¾Ø§Ù†Ù„">Ù¾Ø§Ù†Ù„</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Ù…ØªØ±Ø§Ú˜ (Ù…ØªØ±) *</label>
                        <input type="number" class="productMeterage" placeholder="0" min="0" step="0.1" value="0" oninput="calculateContract()">
                    </div>
                    <div class="form-group">
                        <label>Ù‚ÛŒÙ…Øª ÙÛŒ Ù…ØªØ± (ØªÙˆÙ…Ø§Ù†) *</label>
                        <input type="number" class="productPrice" placeholder="0" min="0" value="0" oninput="calculateContract()">
                    </div>
                    <div class="form-group">
                        <label>Ù…Ø¨Ù„Øº Ú©Ù„ (ØªÙˆÙ…Ø§Ù†)</label>
                        <input type="text" class="productTotal" value="0" readonly style="background: #f8f9fa;">
                    </div>
                    <button type="button" class="btn btn-danger btn-sm" onclick="removeProductRow(1)" style="display: none;">Ø­Ø°Ù</button>
                </div>
            `;
            
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ú†Ú©â€ŒÙ‡Ø§
            checkRowCount = 1;
            document.getElementById('checkRowsContainer').innerHTML = `
                <div class="check-row" data-check="1">
                    <div>
                        <div class="form-grid" style="grid-template-columns: 1fr 1fr 1fr 1fr; gap: 5px;">
                            <div class="form-group">
                                <label>Ø´Ù…Ø§Ø±Ù‡ Ú†Ú©</label>
                                <input type="text" class="checkNumber" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ú†Ú©" oninput="calculateContract()">
                            </div>
                            <div class="form-group">
                                <label>Ù…Ø¨Ù„Øº (ØªÙˆÙ…Ø§Ù†)</label>
                                <input type="number" class="checkAmount" placeholder="0" min="0" value="0" oninput="calculateContract()">
                            </div>
                            <div class="form-group">
                                <label>ØªØ§Ø±ÛŒØ® Ø³Ø±Ø±Ø³ÛŒØ¯</label>
                                <input type="text" class="checkDueDate" placeholder="1402/10/15">
                            </div>
                            <div class="form-group">
                                <label>Ø¨Ø§Ù†Ú©</label>
                                <input type="text" class="checkBank" placeholder="Ù†Ø§Ù… Ø¨Ø§Ù†Ú©">
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-danger btn-sm" onclick="removeCheckRow(1)" style="display: none;">Ø­Ø°Ù</button>
                </div>
            `;
            
            calculateContract();
        }

        // Ø­Ø°Ù Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯
        function deleteContract(contractId) {
            if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ùˆ Ú†Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ·Ù‡ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                // Ø­Ø°Ù Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯
                appData.contracts = appData.contracts.filter(c => c.id !== contractId);
                
                // Ø­Ø°Ù Ú†Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø§ÛŒÙ† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯
                appData.checks = appData.checks.filter(check => check.contractId !== contractId);
                
                saveData();
                displayContracts();
                displayAllChecks();
                updateDashboard();
                updateFinanceStats();
                showNotification('Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ùˆ Ú†Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ·Ù‡ Ø­Ø°Ù Ø´Ø¯Ù†Ø¯');
            }
        }

        // =====================
        // Ù…Ø¯ÛŒØ±ÛŒØª Ù†ÙˆØ¨Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„
        // =====================
        function addDelivery() {
            const customer = document.getElementById('deliveryCustomer').value.trim();
            const date = document.getElementById('deliveryDateInput').value;

            if (!customer || !date) {
                showNotification('Ù„Ø·ÙØ§ Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ Ùˆ ØªØ§Ø±ÛŒØ® Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }

            const delivery = {
                id: Date.now(),
                customer: customer,
                date: date,
                timeSlot: document.getElementById('deliveryTimeSlot').value,
                notes: document.getElementById('deliveryNotes').value || '-',
                status: 'Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø´Ø¯Ù‡',
                createdDate: new Date().toLocaleDateString('fa-IR')
            };

            appData.deliveries.push(delivery);
            saveData();
            displayDeliveries();
            resetDeliveryForm();
            showNotification('Ù†ÙˆØ¨Øª Ø§Ø±Ø³Ø§Ù„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯');
        }

        function displayDeliveries() {
            const deliveriesTable = document.getElementById('deliveriesTable');
            
            if (appData.deliveries.length === 0) {
                deliveriesTable.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 20px;">Ù‡ÛŒÚ† Ù†ÙˆØ¨Øª Ø§Ø±Ø³Ø§Ù„ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</td></tr>';
                return;
            }
            
            let html = '';
            appData.deliveries.forEach((delivery, index) => {
                html += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${delivery.customer}</td>
                        <td>${delivery.date}</td>
                        <td>${delivery.timeSlot}</td>
                        <td>
                            <button class="btn btn-danger btn-sm" onclick="deleteDelivery(${delivery.id})">Ø­Ø°Ù</button>
                        </td>
                    </tr>
                `;
            });
            
            deliveriesTable.innerHTML = html;
        }

        function resetDeliveryForm() {
            document.getElementById('deliveryCustomer').value = '';
            document.getElementById('deliveryDateInput').value = '';
            document.getElementById('deliveryNotes').value = '';
        }

        function deleteDelivery(deliveryId) {
            appData.deliveries = appData.deliveries.filter(d => d.id !== deliveryId);
            saveData();
            displayDeliveries();
            showNotification('Ù†ÙˆØ¨Øª Ø§Ø±Ø³Ø§Ù„ Ø­Ø°Ù Ø´Ø¯');
        }

        // =====================
        // Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø´ØªØ±ÛŒØ§Ù†
        // =====================
        function addCustomerIfNotExists(name, phone) {
            const existingCustomer = appData.customers.find(c => c.phone === phone);
            if (!existingCustomer) {
                appData.customers.push({
                    id: Date.now(),
                    name: name,
                    phone: phone,
                    registrationDate: new Date().toLocaleDateString('fa-IR')
                });
                saveData();
            }
        }

        function addCustomer() {
            const name = document.getElementById('customerName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();

            if (!name || !phone) {
                showNotification('Ù„Ø·ÙØ§ Ù†Ø§Ù… Ùˆ Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ù…Ø´ØªØ±ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }

            const customer = {
                id: Date.now(),
                name: name,
                phone: phone,
                address: document.getElementById('customerAddress').value || '-',
                type: document.getElementById('customerType').value,
                registrationDate: new Date().toLocaleDateString('fa-IR')
            };

            appData.customers.push(customer);
            saveData();
            displayCustomers();
            updateDashboard();
            resetCustomerForm();
            showNotification('Ù…Ø´ØªØ±ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯');
        }

        function displayCustomers() {
            const customersTable = document.getElementById('customersTable');
            
            if (appData.customers.length === 0) {
                customersTable.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 20px;">Ù‡ÛŒÚ† Ù…Ø´ØªØ±ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</td></tr>';
                return;
            }
            
            let html = '';
            appData.customers.forEach((customer, index) => {
                html += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${customer.name}</td>
                        <td>${customer.phone}</td>
                        <td>${customer.type}</td>
                        <td>${customer.address}</td>
                        <td>
                            <button class="btn btn-danger btn-sm" onclick="deleteCustomer(${customer.id})">Ø­Ø°Ù</button>
                        </td>
                    </tr>
                `;
            });
            
            customersTable.innerHTML = html;
        }

        function resetCustomerForm() {
            document.getElementById('customerName').value = '';
            document.getElementById('customerPhone').value = '';
            document.getElementById('customerAddress').value = '';
        }

        function deleteCustomer(customerId) {
            appData.customers = appData.customers.filter(c => c.id !== customerId);
            saveData();
            displayCustomers();
            updateDashboard();
            showNotification('Ù…Ø´ØªØ±ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯');
        }

        // =====================
        // Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ú©Ù†Ø§Ù†
        // =====================
        function addWorker() {
            const name = document.getElementById('workerName').value.trim();

            if (!name) {
                showNotification('Ù„Ø·ÙØ§ Ù†Ø§Ù… Ú©Ø§Ø±Ù…Ù†Ø¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }

            const worker = {
                id: Date.now(),
                name: name,
                nationalCode: document.getElementById('workerNationalCode').value || '-',
                phone: document.getElementById('workerPhone').value || '-',
                position: document.getElementById('workerPosition').value,
                salary: parseFloat(document.getElementById('workerSalary').value) || 0,
                hireDate: document.getElementById('workerHireDate').value || new Date().toLocaleDateString('fa-IR')
            };

            appData.workers.push(worker);
            saveData();
            displayWorkers();
            updateDashboard();
            resetWorkerForm();
            showNotification('Ú©Ø§Ø±Ù…Ù†Ø¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯');
        }

        function displayWorkers() {
            const workersTable = document.getElementById('workersTable');
            
            if (appData.workers.length === 0) {
                workersTable.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 20px;">Ù‡ÛŒÚ† Ú©Ø§Ø±Ù…Ù†Ø¯ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</td></tr>';
                return;
            }
            
            let html = '';
            appData.workers.forEach((worker, index) => {
                html += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${worker.name}</td>
                        <td>${worker.nationalCode}</td>
                        <td>${worker.position}</td>
                        <td>${worker.salary.toLocaleString('fa-IR')}</td>
                        <td>
                            <button class="btn btn-danger btn-sm" onclick="deleteWorker(${worker.id})">Ø­Ø°Ù</button>
                        </td>
                    </tr>
                `;
            });
            
            workersTable.innerHTML = html;
        }

        function resetWorkerForm() {
            document.getElementById('workerName').value = '';
            document.getElementById('workerNationalCode').value = '';
            document.getElementById('workerPhone').value = '';
            document.getElementById('workerSalary').value = '';
            document.getElementById('workerHireDate').value = '';
        }

        function deleteWorker(workerId) {
            appData.workers = appData.workers.filter(w => w.id !== workerId);
            saveData();
            displayWorkers();
            updateDashboard();
            showNotification('Ú©Ø§Ø±Ù…Ù†Ø¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯');
        }

        // =====================
        // Ù…Ø¯ÛŒØ±ÛŒØª ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù„ÛŒ
        // =====================
        function addTransaction() {
            const amount = parseFloat(document.getElementById('transactionAmount').value);
            const type = document.getElementById('transactionType').value;

            if (!amount || amount <= 0) {
                showNotification('Ù„Ø·ÙØ§ Ù…Ø¨Ù„Øº Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }

            const transaction = {
                id: Date.now(),
                type: type,
                amount: amount,
                category: document.getElementById('transactionCategory').value,
                description: document.getElementById('transactionDescription').value || '-',
                date: new Date().toLocaleDateString('fa-IR')
            };

            appData.transactions.push(transaction);
            saveData();
            displayTransactions();
            updateFinanceStats();
            resetTransactionForm();
            showNotification('ØªØ±Ø§Ú©Ù†Ø´ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯');
        }

        function displayTransactions() {
            const transactionsTable = document.getElementById('transactionsTable');
            
            if (appData.transactions.length === 0) {
                transactionsTable.innerHTML = '<tr><td colspan="7" style="text-align: center; padding: 20px;">Ù‡ÛŒÚ† ØªØ±Ø§Ú©Ù†Ø´ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</td></tr>';
                return;
            }
            
            let html = '';
            appData.transactions.forEach((transaction, index) => {
                html += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${transaction.date}</td>
                        <td>${transaction.type === 'income' ? 'Ø¯Ø±Ø¢Ù…Ø¯' : 'Ù‡Ø²ÛŒÙ†Ù‡'}</td>
                        <td>${transaction.category}</td>
                        <td>${transaction.description}</td>
                        <td>${transaction.amount.toLocaleString('fa-IR')}</td>
                        <td>
                            <button class="btn btn-danger btn-sm" onclick="deleteTransaction(${transaction.id})">Ø­Ø°Ù</button>
                        </td>
                    </tr>
                `;
            });
            
            transactionsTable.innerHTML = html;
        }

        function updateFinanceStats() {
            const income = appData.transactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
            
            const expense = appData.transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
            
            const netProfit = income - expense;
            
            document.getElementById('totalIncomeFinance').textContent = income.toLocaleString('fa-IR');
            document.getElementById('totalExpenseFinance').textContent = expense.toLocaleString('fa-IR');
            document.getElementById('netProfit').textContent = netProfit.toLocaleString('fa-IR');
        }

        function resetTransactionForm() {
            document.getElementById('transactionAmount').value = '';
            document.getElementById('transactionDescription').value = '';
        }

        function deleteTransaction(transactionId) {
            appData.transactions = appData.transactions.filter(t => t.id !== transactionId);
            saveData();
            displayTransactions();
            updateFinanceStats();
            showNotification('ØªØ±Ø§Ú©Ù†Ø´ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯');
        }

        // =====================
        // Ù…Ø¯ÛŒØ±ÛŒØª Ú†Ú©â€ŒÙ‡Ø§
        // =====================
        function displayAllChecks() {
            const allChecksTable = document.getElementById('allChecksTable');
            
            if (appData.checks.length === 0) {
                allChecksTable.innerHTML = '<tr><td colspan="8" style="text-align: center; padding: 20px;">Ù‡ÛŒÚ† Ú†Ú©ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</td></tr>';
                return;
            }
            
            let html = '';
            appData.checks.forEach((check, index) => {
                html += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${check.number}</td>
                        <td>${check.customer}</td>
                        <td>${check.amount.toLocaleString('fa-IR')}</td>
                        <td>${check.dueDate}</td>
                        <td>${check.bank}</td>
                        <td><span class="status-active">${check.status}</span></td>
                        <td>
                            <button class="btn btn-success btn-sm" onclick="clearCheck(${check.id})">ÙˆØµÙˆÙ„ Ø´Ø¯</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteCheck(${check.id})">Ø­Ø°Ù</button>
                        </td>
                    </tr>
                `;
            });
            
            allChecksTable.innerHTML = html;
        }

        function clearCheck(checkId) {
            const check = appData.checks.find(c => c.id === checkId);
            if (check) {
                check.status = 'ÙˆØµÙˆÙ„ Ø´Ø¯Ù‡';
                saveData();
                displayAllChecks();
                showNotification('Ú†Ú© Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ÙˆØµÙˆÙ„ Ø´Ø¯Ù‡ Ø¹Ù„Ø§Ù…Øª Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯');
            }
        }

        function deleteCheck(checkId) {
            if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ú†Ú© Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                appData.checks = appData.checks.filter(c => c.id !== checkId);
                saveData();
                displayAllChecks();
                showNotification('Ú†Ú© Ø­Ø°Ù Ø´Ø¯');
            }
        }

        // =====================
        // ØªÙ†Ø¸ÛŒÙ…Ø§Øª
        // =====================
        function loadSettings() {
            document.getElementById('companyName').value = appData.settings.companyName;
            document.getElementById('companyPhone').value = appData.settings.companyPhone;
        }

        function saveSettings() {
            appData.settings.companyName = document.getElementById('companyName').value;
            appData.settings.companyPhone = document.getElementById('companyPhone').value;
            saveData();
            showNotification('ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
        }

        function showSystemInfo() {
            alert(`Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³ÛŒØ³ØªÙ…:
            
ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§: ${appData.contracts.length}
ØªØ¹Ø¯Ø§Ø¯ Ù…Ø´ØªØ±ÛŒØ§Ù†: ${appData.customers.length}
ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ú©Ù†Ø§Ù†: ${appData.workers.length}
ØªØ¹Ø¯Ø§Ø¯ Ú†Ú©â€ŒÙ‡Ø§: ${appData.checks.length}
ØªØ¹Ø¯Ø§Ø¯ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§: ${appData.transactions.length}

Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¯Ø± localStorage Ù…Ø±ÙˆØ±Ú¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.`);
        }

        // =====================
        // Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ
        // =====================
        function generateReport() {
            const reportType = document.getElementById('reportType').value;
            const fromDate = document.getElementById('reportFromDate').value;
            const toDate = document.getElementById('reportToDate').value;
            
            let reportHTML = '<h4>Ú¯Ø²Ø§Ø±Ø´ Ø³ÛŒØ³ØªÙ…</h4>';
            
            if (reportType === 'financial') {
                reportHTML += '<h5>Ú¯Ø²Ø§Ø±Ø´ Ù…Ø§Ù„ÛŒ</h5>';
                
                const income = appData.transactions
                    .filter(t => t.type === 'income')
                    .reduce((sum, t) => sum + t.amount, 0);
                
                const expense = appData.transactions
                    .filter(t => t.type === 'expense')
                    .reduce((sum, t) => sum + t.amount, 0);
                
                reportHTML += `
                    <p>Ú©Ù„ Ø¯Ø±Ø¢Ù…Ø¯: ${income.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                    <p>Ú©Ù„ Ù‡Ø²ÛŒÙ†Ù‡: ${expense.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                    <p>Ø³ÙˆØ¯ Ø®Ø§Ù„Øµ: ${(income - expense).toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                `;
            } else if (reportType === 'contracts') {
                reportHTML += '<h5>Ú¯Ø²Ø§Ø±Ø´ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§</h5>';
                reportHTML += `<p>ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§: ${appData.contracts.length}</p>`;
                
                const totalAmount = appData.contracts.reduce((sum, c) => sum + c.totalAmount, 0);
                const totalAdvance = appData.contracts.reduce((sum, c) => sum + c.advance, 0);
                const totalChecks = appData.checks.reduce((sum, c) => sum + c.amount, 0);
                
                reportHTML += `
                    <p>Ù…Ø¬Ù…ÙˆØ¹ Ù…Ø¨Ø§Ù„Øº Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§: ${totalAmount.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                    <p>Ù…Ø¬Ù…ÙˆØ¹ Ù¾ÛŒØ´ Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒÙ‡Ø§: ${totalAdvance.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                    <p>Ù…Ø¬Ù…ÙˆØ¹ Ú†Ú©â€ŒÙ‡Ø§: ${totalChecks.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                `;
            }
            
            document.getElementById('reportPreview').innerHTML = reportHTML;
            showNotification('Ú¯Ø²Ø§Ø±Ø´ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯');
        }

        function printReport() {
            window.print();
        }

        // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date();
            const year = today.getFullYear() - 621;
            const month = (today.getMonth() + 1).toString().padStart(2, '0');
            const day = today.getDate().toString().padStart(2, '0');
            const todayStr = `${year}/${month}/${day}`;
            
            // ØªÙ†Ø¸ÛŒÙ… ØªØ§Ø±ÛŒØ®â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶
            document.getElementById('deliveryDate').value = todayStr;
            document.getElementById('deliveryDateInput').value = todayStr;
            document.getElementById('reportFromDate').value = `${year}/${month}/01`;
            document.getElementById('reportToDate').value = todayStr;
            document.getElementById('workerHireDate').value = todayStr;
            
            console.log('âœ… Ø³ÛŒØ³ØªÙ… Ú©Ø§Ù…Ù„ Ø¨Ø§ ØªÙ…Ø§Ù… ØªØ¨â€ŒÙ‡Ø§ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª!');
            console.log('âœ… ÙØ±Ù…ÙˆÙ„ Ù…Ø­Ø§Ø³Ø¨Ù‡: Ù…Ø§Ù†Ø¯Ù‡ = (Ù…Ø¬Ù…ÙˆØ¹ Ù…Ø­ØµÙˆÙ„Ø§Øª) - (Ù¾ÛŒØ´ Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ù‚Ø¯ÛŒ) - (Ù…Ø¬Ù…ÙˆØ¹ Ú†Ú©â€ŒÙ‡Ø§)');
        });
    </script>
</body>
</html>
