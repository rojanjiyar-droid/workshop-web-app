<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ­ Ú©Ù„Ø´ÛŒÙÙˆÙ… - Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ Ú©Ø§Ù…Ù„ v4.0 ğŸš€</title>
    
    <!-- Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jalaali-js@1.1.0/dist/jalaali.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        :root {
            --p:#2c3e50; --s:#3498db; --g:#27ae60; --w:#f39c12; --r:#e74c3c;
            --l:#f8f9fa; --d:#343a40; --gray:#6c757d; --shadow:0 4px 20px rgba(0,0,0,0.1);
            --br:12px; --trans:all 0.3s ease;
        }
        [data-theme="dark"] {
            --p:#ecf0f1; --s:#5dade2; --g:#58d68d; --l:#2c3e50; --d:#34495e; --gray:#bdc3c7;
        }
        body {
            font-family:'Vazirmatn','Tahoma',Arial,sans-serif;
            background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
            min-height:100vh; color:var(--p); line-height:1.6; padding:10px; direction:rtl;
        }
        .container { max-width:100%; margin:0 auto }
        .d-none { display:none!important }
        .d-flex { display:flex!important }
        .gap-2 { gap:10px }
        
        /* BUTTONS */
        .btn {
            display:inline-flex; align-items:center; justify-content:center; gap:8px;
            padding:12px 24px; border:none; border-radius:var(--br); font-size:14px;
            font-weight:500; cursor:pointer; transition:var(--trans); text-decoration:none;
            white-space:nowrap; touch-action:manipulation;
        }
        .btn:hover { opacity:0.95; transform:translateY(-2px); }
        .btn:active { transform:translateY(0); }
        .btn:disabled { opacity:0.6; cursor:not-allowed; }
        .btn-sm { padding:8px 16px; font-size:12px; }
        .btn-primary { background:var(--s); color:white; }
        .btn-success { background:var(--g); color:white; }
        .btn-warning { background:var(--w); color:white; }
        .btn-danger { background:var(--r); color:white; }
        
        /* LOGIN */
        .login-container { display:flex; justify-content:center; align-items:center; min-height:100vh; padding:20px; }
        .login-card {
            background:var(--l); border-radius:20px; box-shadow:var(--shadow); padding:40px;
            width:100%; max-width:400px; text-align:center; position:relative; overflow:hidden;
        }
        .login-card::before { content:''; position:absolute; top:0; left:0; right:0; height:4px; background:linear-gradient(90deg,var(--s),var(--g)); }
        .logo { width:80px; height:80px; margin:0 auto 20px; background:linear-gradient(135deg,var(--s),var(--g)); border-radius:50%; display:flex; align-items:center; justify-content:center; color:white; font-size:28px; font-weight:bold; }
        .form-control { width:100%; padding:16px; border:2px solid #e0e0e0; border-radius:12px; font-size:16px; transition:var(--trans); font-family:inherit; margin-bottom:15px; background:var(--l); color:var(--p); }
        .form-control:focus { border-color:var(--s); outline:none; box-shadow:0 0 0 3px rgba(52,152,219,0.1); }
        .form-control.is-invalid { border-color:var(--r); }
        .invalid-feedback { color:var(--r); font-size:12px; margin-top:5px; display:none; }
        .form-control.is-invalid ~ .invalid-feedback { display:block; }
        
        /* MAIN APP */
        .main-container { background:var(--l); border-radius:20px; box-shadow:var(--shadow); overflow:hidden; min-height:calc(100vh - 40px); margin:20px auto; max-width:1400px; }
        .main-header {
            background:linear-gradient(135deg,var(--p),var(--s)); color:white; padding:20px;
            display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:15px;
        }
        .main-nav { background:var(--d); display:flex; flex-wrap:wrap; justify-content:center; overflow-x:auto; -webkit-overflow-scrolling:touch; }
        .nav-btn { background:none; border:none; color:white; padding:16px 20px; cursor:pointer; transition:var(--trans); font-size:14px; white-space:nowrap; display:flex; align-items:center; gap:8px; }
        .nav-btn:hover { background:rgba(255,255,255,0.1); }
        .nav-btn.active { background:var(--s); font-weight:bold; }
        
        .content-area { padding:25px; min-height:500px; }
        .page { display:none; animation:fadeIn 0.3s ease-in; }
        .page.active { display:block; }
        @keyframes fadeIn { from{opacity:0;transform:translateY(10px);} to{opacity:1;transform:translateY(0);} }
        
        /* CARDS & TABLES */
        .card { background:var(--l); border-radius:var(--br); padding:25px; margin-bottom:25px; border-right:4px solid var(--s); box-shadow:var(--shadow); transition:var(--trans); }
        .card:hover { transform:translateY(-3px); box-shadow:0 8px 30px rgba(0,0,0,0.15); }
        .card-header { margin-bottom:20px; padding-bottom:15px; border-bottom:2px solid #e0e0e0; display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:10px; }
        .card-title { font-size:20px; font-weight:bold; color:var(--p); display:flex; align-items:center; gap:10px; }
        
        .stats-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:20px; margin-bottom:25px; }
        .stat-card { background:linear-gradient(135deg,var(--s),var(--p)); color:white; padding:25px; border-radius:var(--br); text-align:center; transition:var(--trans); }
        .stat-card:hover { transform:translateY(-8px); box-shadow:0 15px 35px rgba(0,0,0,0.2); }
        .stat-value { font-size:32px; font-weight:bold; margin-bottom:8px; }
        .stat-label { font-size:14px; opacity:0.95; }
        
        .table-responsive { overflow-x:auto; border-radius:var(--br); border:1px solid #e0e0e0; background:var(--l); margin-top:20px; }
        .table { width:100%; border-collapse:collapse; min-width:600px; }
        .table th { background:var(--p); color:white; padding:15px; text-align:right; font-weight:bold; position:sticky; top:0; z-index:10; }
        .table td { padding:15px; text-align:right; border-bottom:1px solid #f0f0f0; }
        .table tr:hover { background:#f8f9ff; }
        
        /* NOTIFICATIONS */
        .notification-container { position:fixed; top:25px; right:25px; z-index:10000; max-width:380px; pointer-events:none; }
        .notification {
            background:var(--l); padding:20px; margin-bottom:12px; border-radius:var(--br);
            box-shadow:0 10px 30px rgba(0,0,0,0.2); border-right:6px solid var(--g);
            display:flex; align-items:flex-start; gap:15px; animation:slideIn 0.4s cubic-bezier(0.4,0,0.2,1);
            pointer-events:auto; backdrop-filter:blur(10px);
        }
        .notification.success { border-right-color:var(--g); }
        .notification.error { border-right-color:var(--r); }
        .notification.warning { border-right-color:var(--w); }
        @keyframes slideIn { from{transform:translateX(100%);opacity:0;} to{transform:translateX(0);opacity:1;} }
        
        /* MODALS & LOADING */
        .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:10000; justify-content:center; align-items:center; padding:20px; backdrop-filter:blur(5px); }
        .modal.active { display:flex; }
        .modal-content { background:var(--l); padding:35px; border-radius:var(--br); width:100%; max-width:550px; max-height:90vh; overflow-y:auto; box-shadow:0 20px 60px rgba(0,0,0,0.3); }
        .loading-overlay {
            position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.95);
            z-index:9999; display:none; justify-content:center; align-items:center; flex-direction:column; gap:20px; backdrop-filter:blur(10px);
        }
        .loading-overlay.active { display:flex; }
        .spinner { width:60px; height:60px; border:6px solid #f3f3f3; border-top:6px solid var(--s); border-radius:50%; animation:spin 1s linear infinite; }
        @keyframes spin { 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }
        
        /* FORMS & SEARCH */
        .form-row { display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:20px; margin-bottom:20px; }
        .search-box { position:relative; margin-bottom:20px; }
        .search-input { width:100%; padding:15px 50px 15px 20px; border:2px solid #e0e0e0; border-radius:12px; font-size:15px; transition:var(--trans); }
        .search-input:focus { border-color:var(--s); outline:none; }
        .search-icon { position:absolute; left:20px; top:50%; transform:translateY(-50%); color:#999; font-size:18px; }
        
        /* ROWS */
        .product-row, .check-row, .finance-row {
            display:grid; grid-template-columns:2fr 1.5fr 1.5fr 1.5fr auto; gap:15px; align-items:center;
            margin-bottom:15px; padding:20px; background:white; border-radius:var(--br); border:1px solid #e0e0e0;
            box-shadow:0 2px 10px rgba(0,0,0,0.05);
        }
        .btn-remove { background:var(--r); color:white; width:40px; height:40px; border-radius:50%; font-size:16px; }
        
        /* BADGES */
        .badge { display:inline-block; padding:6px 12px; border-radius:20px; font-size:12px; font-weight:bold; }
        .badge-success { background:#d4edda; color:#155724; }
        .badge-danger { background:#f8d7da; color:#721c24; }
        .badge-warning { background:#fff3cd; color:#856404; }
        
        /* CHARTS */
        .chart-container { background:white; border-radius:var(--br); padding:25px; margin-bottom:25px; border:1px solid #e0e0e0; height:300px; position:relative; }
        
        /* RESPONSIVE */
        @media (max-width:768px) {
            .main-header { flex-direction:column; text-align:center; }
            .nav-btn { padding:12px 16px; font-size:13px; flex:1; justify-content:center; }
            .form-row, .product-row, .check-row { grid-template-columns:1fr; }
            .stats-grid { grid-template-columns:repeat(2,1fr); }
        }
        @media (max-width:480px) { .stats-grid { grid-template-columns:1fr; } .login-card { padding:25px; } .card { padding:20px; } }
        
        /* PRINT */
        @media print {
            body { margin:0; font-size:10pt; width:70mm; }
            .no-print { display:none!important; }
            .print-10x20 { width:70mm!important; margin:0 auto!important; font-size:10pt!important; line-height:1.3!important; }
            .print-10x20 table { font-size:9pt!important; }
        }
    </style>
</head>
<body>

<!-- Notifications -->
<div class="notification-container" id="notificationContainer"></div>

<!-- Loading Overlay -->
<div class="loading-overlay" id="loadingOverlay">
    <div class="spinner"></div>
    <div id="loadingText" style="font-size:18px;font-weight:bold;color:var(--p)">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
</div>

<!-- Login Page -->
<div class="login-container" id="loginPage">
    <div class="login-card">
        <div class="logo">CF</div>
        <h1 style="margin-bottom:30px;color:var(--p);font-size:28px">ğŸ­ Ú©Ù„Ø´ÛŒÙÙˆÙ… v4.0</h1>
        <div class="form-group">
            <label for="username" style="display:block;margin-bottom:10px;font-weight:bold;color:var(--p)">ğŸ‘¤ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</label>
            <input type="text" id="username" class="form-control" placeholder="admin" value="admin">
            <div class="invalid-feedback"></div>
        </div>
        <div class="form-group">
            <label for="password" style="display:block;margin-bottom:10px;font-weight:bold;color:var(--p)">ğŸ”’ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
            <input type="password" id="password" class="form-control" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" value="1234">
            <div class="invalid-feedback"></div>
        </div>
        <div id="loginAttempts" style="font-size:12px;color:#666;margin-bottom:20px"></div>
        <button class="btn btn-success w-100" id="loginBtn" onclick="handleLogin()">
            <span id="loginSpinner" class="spinner-border spinner-border-sm d-none" style="width:16px;height:16px"></span>
            <span>ğŸš€ ÙˆØ±ÙˆØ¯</span>
        </button>
        <div style="margin-top:20px;font-size:12px;color:#666">
            <strong>admin / 1234</strong>
        </div>
    </div>
</div>

<!-- Main App -->
<div class="main-container d-none" id="mainApp">
    <!-- Header -->
    <header class="main-header">
        <div class="header-info">
            <div class="company-logo" id="companyLogo" style="width:40px;height:40px;border-radius:50%;background:white;display:flex;align-items:center;justify-content:center;font-size:20px;margin-right:15px">ğŸ­</div>
            <div>
                <h2 id="companyNameDisplay" style="margin:0;font-size:24px">Ú©Ø§Ø±Ø®Ø§Ù†Ù‡ ÛŒÙˆÙ†ÙˆÙ„ÛŒØª Ú©Ù„Ø´ÛŒÙÙˆÙ…</h2>
                <div id="currentDate" class="text-light" style="font-size:14px"></div>
            </div>
        </div>
        <div class="d-flex gap-2" style="align-items:center">
            <span id="welcomeUser" style="font-weight:bold"></span>
            <button class="btn btn-danger btn-sm" onclick="logout()">
                <span>ğŸšª</span><span>Ø®Ø±ÙˆØ¬</span>
            </button>
            <button class="btn btn-warning btn-sm" onclick="toggleTheme()" id="themeBtn" title="Ctrl+T">
                <span>ğŸŒ™</span><span>ØªÙ…</span>
            </button>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="main-nav">
        <button class="nav-btn active" onclick="showPage('dashboard')"><span>ğŸ“Š</span><span>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</span></button>
        <button class="nav-btn" onclick="showPage('contracts')"><span>ğŸ“‹</span><span>Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§</span></button>
        <button class="nav-btn" onclick="showPage('invoices')"><span>ğŸ§¾</span><span>ÙØ§Ú©ØªÙˆØ±Ù‡Ø§</span></button>
        <button class="nav-btn" onclick="showPage('delivery')"><span>ğŸšš</span><span>Ù†ÙˆØ¨Øª Ø§Ø±Ø³Ø§Ù„</span></button>
        <button class="nav-btn" onclick="showPage('customers')"><span>ğŸ‘¥</span><span>Ù…Ø´ØªØ±ÛŒØ§Ù†</span></button>
        <button class="nav-btn" onclick="showPage('workers')"><span>ğŸ‘·</span><span>Ú©Ø§Ø±Ú©Ù†Ø§Ù†</span></button>
        <button class="nav-btn" onclick="showPage('checks')"><span>ğŸ’³</span><span>Ú†Ú©â€ŒÙ‡Ø§</span></button>
        <button class="nav-btn" onclick="showPage('finances')"><span>ğŸ’°</span><span>Ø¯Ø±Ø¢Ù…Ø¯/Ù‡Ø²ÛŒÙ†Ù‡</span></button>
        <button class="nav-btn" onclick="showPage('reports')"><span>ğŸ“ˆ</span><span>Ú¯Ø²Ø§Ø±Ø´Ø§Øª</span></button>
        <button class="nav-btn" onclick="showPage('backup')"><span>â˜ï¸</span><span>Ù¾Ø´ØªÛŒØ¨Ø§Ù†</span></button>
        <button class="nav-btn" onclick="showPage('settings')"><span>âš™ï¸</span><span>ØªÙ†Ø¸ÛŒÙ…Ø§Øª</span></button>
    </nav>

    <!-- Content Area -->
    <main class="content-area" id="contentArea">
        
        <!-- Dashboard -->
        <div id="dashboard" class="page active">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">ğŸ“Š Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§ØµÙ„ÛŒ</h3>
                    <div class="d-flex gap-2">
                        <button class="btn btn-sm btn-primary" onclick="refreshDashboard()">ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</button>
                        <button class="btn btn-sm btn-success" onclick="quickBackup()">ğŸ’¾ Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø³Ø±ÛŒØ¹</button>
                    </div>
                </div>
                <div class="stats-grid" id="dashboardStats"></div>
                <div class="d-flex gap-2 flex-wrap" style="margin-bottom:25px">
                    <div class="stat-card" style="min-width:200px">
                        <div class="stat-value" style="color:#58d68d" id="todayIncome">0</div>
                        <div class="stat-label">Ø¯Ø±Ø¢Ù…Ø¯ Ø§Ù…Ø±ÙˆØ²</div>
                    </div>
                    <div class="stat-card" style="min-width:200px">
                        <div class="stat-value" style="color:#e74c3c" id="todayExpense">0</div>
                        <div class="stat-label">Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ù…Ø±ÙˆØ²</div>
                    </div>
                    <div class="stat-card" style="min-width:200px">
                        <div class="stat-value" id="dueChecks">0</div>
                        <div class="stat-label">Ú†Ú©â€ŒÙ‡Ø§ÛŒ Ø³Ø±Ø±Ø³ÛŒØ¯</div>
                    </div>
                </div>
                <div class="d-flex gap-3 flex-wrap">
                    <div style="flex:1;min-width:300px">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">ğŸ“ˆ Ø¯Ø±Ø¢Ù…Ø¯ Ù…Ø§Ù‡Ø§Ù†Ù‡</h3>
                            </div>
                            <div class="chart-container">
                                <canvas id="monthlyChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div style="flex:1;min-width:300px">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">ğŸ’³ ÙˆØ¶Ø¹ÛŒØª Ú†Ú©â€ŒÙ‡Ø§</h3>
                            </div>
                            <div class="chart-container">
                                <canvas id="checkChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card" style="margin-top:25px">
                    <div class="card-header">
                        <h3 class="card-title">â° ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ø±ÙˆØ²</h3>
                    </div>
                    <div id="todaysReminders" class="p-3" style="max-height:200px;overflow-y:auto"></div>
                </div>
            </div>
        </div>

        <!-- Contracts Page -->
        <div id="contracts" class="page">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">ğŸ“‹ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§</h3>
                    <button class="btn btn-sm btn-success" onclick="resetContractForm()">â• Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø¬Ø¯ÛŒØ¯</button>
                </div>
                
                <!-- Contract Form -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="contractCustomer">Ù…Ø´ØªØ±ÛŒ</label>
                        <input type="text" id="contractCustomer" class="form-control persian-only" placeholder="Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ" list="customerList" onchange="loadCustomerInfo(this.value)">
                        <datalist id="customerList"></datalist>
                    </div>
                    <div class="form-group">
                        <label for="contractPhone">ØªÙ„ÙÙ†</label>
                        <input type="text" id="contractPhone" class="form-control" placeholder="09123456789" oninput="validatePhone(this)">
                    </div>
                    <div class="form-group">
                        <label for="contractAddress">Ø¢Ø¯Ø±Ø³</label>
                        <textarea id="contractAddress" class="form-control persian-only" rows="2" placeholder="Ø¢Ø¯Ø±Ø³ Ú©Ø§Ù…Ù„"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="contractDeliveryDate">ØªØ§Ø±ÛŒØ® ØªØ­ÙˆÛŒÙ„</label>
                        <input type="text" id="contractDeliveryDate" class="form-control pdate" placeholder="1404/01/01">
                    </div>
                    <div class="form-group">
                        <label for="contractAdvance">Ø¨ÛŒØ¹Ø§Ù†Ù‡</label>
                        <input type="number" id="contractAdvance" class="form-control" min="0" value="0" oninput="calculateContractTotals()">
                    </div>
                </div>

                <!-- Products Section -->
                <div class="mt-4">
                    <h4 class="mb-3" style="color:var(--p)">ğŸ“¦ Ù…Ø­ØµÙˆÙ„Ø§Øª</h4>
                    <div id="productRowsContainer"></div>
                    <button type="button" class="btn btn-info btn-sm mt-2" onclick="addProductRow()">â• Ù…Ø­ØµÙˆÙ„ Ø§Ø¶Ø§ÙÙ‡</button>
                </div>

                <!-- Checks Section -->
                <div class="mt-4">
                    <h4 class="mb-3" style="color:var(--p)">ğŸ’³ Ú†Ú©â€ŒÙ‡Ø§</h4>
                    <div id="checkRowsContainer"></div>
                    <button type="button" class="btn btn-info btn-sm mt-2" onclick="addCheckRow()">â• Ú†Ú© Ø§Ø¶Ø§ÙÙ‡</button>
                </div>

                <!-- Totals -->
                <div class="mt-4 p-3 bg-light rounded">
                    <div class="d-flex justify-content-between mb-2"><span>Ø¬Ù…Ø¹ Ú©Ù„:</span><strong id="contractTotalDisplay">0</strong></div>
                    <div class="d-flex justify-content-between mb-2"><span>Ø¨ÛŒØ¹Ø§Ù†Ù‡:</span><strong id="contractAdvanceDisplay">0</strong></div>
                    <div class="d-flex justify-content-between mb-2"><span>Ù…Ø¨Ù„Øº Ú†Ú©â€ŒÙ‡Ø§:</span><strong id="contractCheckDisplay">0</strong></div>
                    <div class="d-flex justify-content-between mt-3 pt-3 border-top"><span>Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡:</span><strong id="contractBalanceDisplay" class="text-danger">0</strong></div>
                </div>

                <!-- Action Buttons -->
                <div class="mt-4 d-flex gap-2 flex-wrap">
                    <button class="btn btn-success" onclick="saveContract()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯</button>
                    <button class="btn btn-primary" onclick="printContract()">ğŸ“„ Ú†Ø§Ù¾ PDF</button>
                    <button class="btn btn-warning" onclick="showReturnModal()">â†©ï¸ Ø¨Ø±Ú¯Ø´Øª Ø§Ø² ÙØ§Ú©ØªÙˆØ±</button>
                    <button class="btn btn-info" onclick="duplicateContract()">ğŸ“‹ Ú©Ù¾ÛŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯</button>
                </div>
            </div>

            <!-- Contracts List -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">ğŸ“‹ Ù„ÛŒØ³Øª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§</h3>
                    <div class="search-box" style="max-width:300px">
                        <input type="text" id="searchContracts" class="search-input" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§...">
                        <span class="search-icon">ğŸ”</span>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table" id="contractsTable">
                        <thead>
                            <tr>
                                <th>Ø±Ø¯ÛŒÙ</th><th>Ù…Ø´ØªØ±ÛŒ</th><th>Ù…Ø¨Ù„Øº Ú©Ù„</th><th>Ø¨ÛŒØ¹Ø§Ù†Ù‡</th><th>Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡</th><th>ØªØ§Ø±ÛŒØ®</th><th>ÙˆØ¶Ø¹ÛŒØª</th><th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Invoices Page -->
        <div id="invoices" class="page">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">ğŸ§¾ ÙØ§Ú©ØªÙˆØ±Ù‡Ø§</h3>
                    <button class="btn btn-sm btn-success" onclick="resetInvoiceForm()">â• ÙØ§Ú©ØªÙˆØ± Ø¬Ø¯ÛŒØ¯</button>
                </div>
                <!-- Invoice Form - Complete implementation similar to contracts -->
                <div style="padding:20px;background:#f8f9fa;border-radius:12px;margin-bottom:25px">
                    <p>Ø¨Ø®Ø´ ÙØ§Ú©ØªÙˆØ±Ù‡Ø§ - Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„</p>
                </div>
            </div>
        </div>

        <!-- Delivery Page -->
        <div id="delivery" class="page">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">ğŸšš Ù†ÙˆØ¨Øª Ø§Ø±Ø³Ø§Ù„</h3>
                </div>
                <!-- Delivery scheduling with calendar integration -->
                <div style="padding:20px;background:#f8f9fa;border-radius:12px;margin-bottom:25px">
                    <p>Ù…Ø¯ÛŒØ±ÛŒØª Ù†ÙˆØ¨Øª Ø§Ø±Ø³Ø§Ù„ Ø¨Ø§ ØªÙ‚ÙˆÛŒÙ… Ø´Ù…Ø³ÛŒ Ú©Ø§Ù…Ù„</p>
                </div>
            </div>
        </div>

        <!-- Customers Page -->
        <div id="customers" class="page">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">ğŸ‘¥ Ù…Ø´ØªØ±ÛŒØ§Ù†</h3>
                </div>
                <div style="padding:20px;background:#f8f9fa;border-radius:12px;margin-bottom:25px">
                    <p>Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ù…Ù„ Ù…Ø´ØªØ±ÛŒØ§Ù† Ø¨Ø§ ØªØ§Ø±ÛŒØ®Ú†Ù‡</p>
                </div>
            </div>
        </div>

        <!-- Workers Page -->
        <div id="workers" class="page">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">ğŸ‘· Ú©Ø§Ø±Ú©Ù†Ø§Ù†</h3>
                </div>
                <div style="padding:20px;background:#f8f9fa;border
